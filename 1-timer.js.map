{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startButton = document.querySelector('.btn-start');\nconst datePicker = document.querySelector('#datetime-picker');\nlet userSelectedDate;\n\n// Початкове вимкнення кнопки старту\nstartButton.disabled = true;\n\nflatpickr(datePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    validateDate(userSelectedDate);\n  },\n});\n\nfunction validateDate(userSelectedDate) {\n  if (userSelectedDate < new Date()) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n      position: 'center',\n    });\n    startButton.disabled = true;\n  } else {\n    startButton.disabled = false;\n  }\n}\n\nclass Timer {\n  constructor({ onTick }) {\n    this.isActive = false;\n    this.onTick = onTick;\n    this.intervalId = null;\n  }\n\n  start() {\n    if (this.isActive) {\n      // Якщо таймер вже активний, не запускати\n      startButton.disabled = true;\n      datePicker.disabled = true;\n\n      iziToast.warning({\n        title: 'Timer has already been active',\n        message: 'Wait please!',\n        position: 'center',\n      });\n      return;\n    }\n    // Отключаем кнопку сразу при старте таймера\n    startButton.disabled = true;\n    datePicker.disabled = true;\n\n    this.isActive = true;\n\n    this.intervalId = setInterval(() => {\n      const currentTime = Date.now();\n      const deltaTime = userSelectedDate - currentTime;\n\n      if (deltaTime <= 0) {\n        clearInterval(this.intervalId); // Зупинка таймера, коли час вичерпано\n        this.onTick({ days: '00', hours: '00', minutes: '00', seconds: '00' });\n        this.isActive = false;\n\n        // Після завершення таймера\n        datePicker.disabled = false;\n        startButton.disabled = true; // Залишаємо кнопку неактивною\n\n        iziToast.success({\n          title: 'Time is up!',\n          message: 'The countdown has finished.',\n        });\n        return;\n      }\n\n      const time = this.convertMs(deltaTime);\n      this.onTick(time);\n    }, 1000);\n  }\n\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = this.addLeadingZero(Math.floor(ms / day));\n    const hours = this.addLeadingZero(Math.floor((ms % day) / hour));\n    const minutes = this.addLeadingZero(\n      Math.floor(((ms % day) % hour) / minute)\n    );\n    const seconds = this.addLeadingZero(\n      Math.floor((((ms % day) % hour) % minute) / second)\n    );\n\n    return { days, hours, minutes, seconds };\n  }\n\n  addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n  }\n}\n\nconst time = new Timer({\n  onTick: updateTimer,\n});\n\nstartButton.addEventListener('click', time.start.bind(time));\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  document.querySelector('[data-days]').textContent = days;\n  document.querySelector('[data-hours]').textContent = hours;\n  document.querySelector('[data-minutes]').textContent = minutes;\n  document.querySelector('[data-seconds]').textContent = seconds;\n}\n"],"names":["startButton","datePicker","userSelectedDate","flatpickr","selectedDates","validateDate","iziToast","Timer","onTick","currentTime","deltaTime","time","ms","days","hours","minutes","seconds","value","updateTimer"],"mappings":"+IAMA,MAAMA,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAa,SAAS,cAAc,kBAAkB,EAC5D,IAAIC,EAGJF,EAAY,SAAW,GAEvBG,EAAUF,EAAY,CACpB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQG,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClCC,EAAaH,CAAgB,CAC9B,CACH,CAAC,EAED,SAASG,EAAaH,EAAkB,CAClCA,EAAmB,IAAI,MACzBI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,QAChB,CAAK,EACDN,EAAY,SAAW,IAEvBA,EAAY,SAAW,EAE3B,CAEA,MAAMO,CAAM,CACV,YAAY,CAAE,OAAAC,GAAU,CACtB,KAAK,SAAW,GAChB,KAAK,OAASA,EACd,KAAK,WAAa,IACnB,CAED,OAAQ,CACN,GAAI,KAAK,SAAU,CAEjBR,EAAY,SAAW,GACvBC,EAAW,SAAW,GAEtBK,EAAS,QAAQ,CACf,MAAO,gCACP,QAAS,eACT,SAAU,QAClB,CAAO,EACD,MACD,CAEDN,EAAY,SAAW,GACvBC,EAAW,SAAW,GAEtB,KAAK,SAAW,GAEhB,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMQ,EAAc,KAAK,MACnBC,EAAYR,EAAmBO,EAErC,GAAIC,GAAa,EAAG,CAClB,cAAc,KAAK,UAAU,EAC7B,KAAK,OAAO,CAAE,KAAM,KAAM,MAAO,KAAM,QAAS,KAAM,QAAS,IAAM,CAAA,EACrE,KAAK,SAAW,GAGhBT,EAAW,SAAW,GACtBD,EAAY,SAAW,GAEvBM,EAAS,QAAQ,CACf,MAAO,cACP,QAAS,6BACnB,CAAS,EACD,MACD,CAED,MAAMK,EAAO,KAAK,UAAUD,CAAS,EACrC,KAAK,OAAOC,CAAI,CACjB,EAAE,GAAI,CACR,CAED,UAAUC,EAAI,CAMZ,MAAMC,EAAO,KAAK,eAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC/CE,EAAQ,KAAK,eAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACzDG,EAAU,KAAK,eACnB,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAC7C,EACUI,EAAU,KAAK,eACnB,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CACxD,EAEI,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,eAAeC,EAAO,CACpB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,CAEA,MAAMN,EAAO,IAAIJ,EAAM,CACrB,OAAQW,CACV,CAAC,EAEDlB,EAAY,iBAAiB,QAASW,EAAK,MAAM,KAAKA,CAAI,CAAC,EAE3D,SAASO,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtD,SAAS,cAAc,aAAa,EAAE,YAAcH,EACpD,SAAS,cAAc,cAAc,EAAE,YAAcC,EACrD,SAAS,cAAc,gBAAgB,EAAE,YAAcC,EACvD,SAAS,cAAc,gBAAgB,EAAE,YAAcC,CACzD"}